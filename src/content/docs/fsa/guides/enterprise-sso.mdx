---
title: Enterprise SSO
description: How to configure enterprise SSO for your application
head:
  - tag: style
    content: |
      .sl-markdown-content h2 {
        font-size: var(--sl-text-xl);
      }
      .sl-markdown-content h3 {
        font-size: var(--sl-text-lg);
      }
sidebar:
  label: "Enterprise SSO"
prev:
  label: "Social logins"
  link: "/fsa/guides/social-logins/"
next:
  label: "Admin Portal"
  link: "/guides/sso/admin-portal/"
---
import { Steps, Tabs, TabItem, Aside } from '@astrojs/starlight/components';
import InstallSDK from '@components/templates/_installsdk.mdx';
import CheckItem from '@/components/ui/CheckItem.astro';

Enterprise SSO allows users to sign in to your application using their organization's identity provider (IdP), such as Okta, Azure AD, or Google Workspace. This provides a secure and seamless authentication experience for your enterprise customers.

![How Scalekit connects your application to enterprise identity providers](@/assets/docs/sso-quickstart/how-scalekit-connects.png)

This guide shows you how to enable enterprise SSO for your customers.

<Steps>
1. ### Complete the prerequisites

    <CheckItem iconName="forward-slash">
     [Set up your Scalekit account](https://app.scalekit.com/ws/signup)
    </CheckItem>
    <CheckItem iconName="forward-slash">
     Understand how to model your customers as [Organizations in Scalekit](/fsa/data-modelling/).
    </CheckItem>

2. ### Install the Scalekit SDK

    <InstallSDK />

    Copy your API credentials from the Scalekit dashboard's API Config section and set them as environment variables.
    ```bash
    SCALEKIT_ENVIRONMENT_URL='<YOUR_ENVIRONMENT_URL>'
    SCALEKIT_CLIENT_ID='<ENVIRONMENT_CLIENT_ID>'
    SCALEKIT_CLIENT_SECRET='<ENVIRONMENT_CLIENT_SECRET>'
    ```

    Create a new Scalekit client instance.
    <Tabs syncKey="tech-stack">
      <TabItem value="nodejs" label="Node.js">
      ```javascript title="utils/auth.js"
      import { Scalekit } from '@scalekit-sdk/node';

      export let scalekit = new Scalekit(
        process.env.SCALEKIT_ENVIRONMENT_URL,
        process.env.SCALEKIT_CLIENT_ID,
        process.env.SCALEKIT_CLIENT_SECRET
      );
      ```
      </TabItem>
      <TabItem value="py" label="Python">
      ```python title="utils/auth.py"
      import os
      from scalekit import ScalekitClient

      scalekit_client = ScalekitClient(
        environment_url=os.environ.get('SCALEKIT_ENVIRONMENT_URL'),
        client_id=os.environ.get('SCALEKIT_CLIENT_ID'),
        client_secret=os.environ.get('SCALEKIT_CLIENT_SECRET')
      )
      ```
      </TabItem>
      <TabItem value="go" label="Go">
        ```go title="utils/auth.go"
        package utils

        import (
        	"os"
        	"github.com/scalekit/scalekit-sdk-go"
        )

        var ScalekitClient *scalekit.ScalekitClient

        func init() {
        	ScalekitClient = scalekit.NewScalekitClient(
        		os.Getenv("SCALEKIT_ENVIRONMENT_URL"),
        		os.Getenv("SCALEKIT_CLIENT_ID"),
        		os.Getenv("SCALEKIT_CLIENT_SECRET"),
        	)
        }
        ```
      </TabItem>
      <TabItem value="java" label="Java">
        ```java title="utils/Auth.java"
        package com.example.utils;

        import com.scalekit.ScalekitClient;

        public class Auth {
            public static ScalekitClient scalekit;

            static {
                scalekit = new ScalekitClient(
                    System.getenv("SCALEKIT_ENVIRONMENT_URL"),
                    System.getenv("SCALEKIT_CLIENT_ID"),
                    System.getenv("SCALEKIT_CLIENT_SECRET")
                );
            }
        }
        ```
      </TabItem>
    </Tabs>

2. ### Initiate SSO login

    To initiate SSO, redirect the user to Scalekit's authorization URL. You can specify different identifiers to control the authentication flow.

    <Tabs syncKey="tech-stack">
    <TabItem value="nodejs" label="Node.js">

    ```javascript title="Express.js"
    const redirectUri = 'http://localhost:3000/api/callback';

    // Option 1: Direct to specific connection
    const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
      connection_id: 'conn_12345',
    });

    // Option 2: Direct to organization's SSO
    const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
      organization_id: 'org_12345',
    });

    // Option 3: Use domain-based routing. Domains must be configured in the Scalekit dashboard.
    const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
      domain: 'customer-domain.com',
    });

    // Option 4: Use email hint for domain detection
    const userEmail = 'employee@customer-domain.com';
    const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
      login_hint: userEmail,
    });

    // Redirect the user to this authorizationURL
    res.redirect(authorizationURL);
    ```

    </TabItem>
    <TabItem value="py" label="Python">
    ```python
    from scalekit import AuthorizationUrlOptions

    redirect_uri = 'http://localhost:3000/api/callback'

    options = AuthorizationUrlOptions()

    # Option 1: Direct to specific connection
    options.connection_id = 'conn_12345'

    # Option 2: Direct to organization's SSO
    options.organization_id = 'org_12345'

    # Option 3: Use domain-based routing. Domains must be configured in the Scalekit dashboard.
    options.domain = 'customer-domain.com'

    # Option 4: Use email hint for domain detection
    options.login_hint = 'employee@customer-domain.com'

    authorization_url = scalekit_client.get_authorization_url(
      redirect_uri=redirect_uri,
      options=options
    )

    # Redirect the user to this authorization URL
    ```
    </TabItem>
    <TabItem value="go" label="Go">
    ```go
    import "github.com/scalekit/scalekit-sdk-go"

    redirectUrl := "http://localhost:3000/api/callback"

    options := scalekit.AuthorizationUrlOptions{
        // Option 1: Direct to specific connection
        ConnectionId: "conn_12345",

        // Option 2: Direct to organization's SSO
        OrganizationId: "org_12345",

        // Option 3: Use domain-based routing. Domains must be configured in the Scalekit dashboard.
        Domain: "customer-domain.com",

        // Option 4: Use email hint for domain detection
        LoginHint: "employee@customer-domain.com",
    }

    authorizationURL, err := ScalekitClient.GetAuthorizationUrl(
        redirectUrl,
        options,
    )
    if err != nil {
        // handle error appropriately
        return
    }
    // Next step is to redirect the user to this authorization URL
    ```
    </TabItem>
    <TabItem value="java" label="Java">
    ```java
    import com.scalekit.internal.http.AuthorizationUrlOptions;

    String redirectUrl = "http://localhost:3000/api/callback";

    AuthorizationUrlOptions options = new AuthorizationUrlOptions();

    // Option 1: Direct to specific connection
    options.setConnectionId("conn_12345");

    // Option 2: Direct to organization's SSO
    options.setOrganizationId("org_12345");

    // Option 3: Use domain-based routing. Domains must be configured in the Scalekit dashboard.
    options.setDomain("customer-domain.com");

    // Option 4: Use email hint for domain detection
    options.setLoginHint("employee@customer-domain.com");

    try {
      URL url = Auth.scalekit.authentication().getAuthorizationUrl(redirectUrl, options);
      String authorizationURL = url.toString();
      // Redirect the user to this authorization URL
    } catch (Exception e) {
      System.out.println(e.getMessage());
    }
    ```
    </TabItem>
    </Tabs>

3. ### Understanding the authorization flow

    When you generate the authorization URL, the behavior depends on the identifiers you provide:

    **Direct to Identity Provider**: If you specify `connection_id`, `organization_id`, or `domain`, users will be automatically redirected to their organization's identity provider for authentication.

    **Scalekit hosted UI**: If you don't provide these identifiers, users will see Scalekit's hosted authentication page. By default, this shows Google OAuth and passwordless login options. Enterprise SSO connection is enabled and functions only if the organization is configured for the user's email domain.

    <Aside type="note" title="Identifier precedence order">
    When multiple identifiers are provided, Scalekit uses this precedence order:
    1. `connection_id` (highest precedence)
    2. `organization_id`
    3. `domain`
    4. `login_hint` (lowest precedence - extracts domain from email)
    </Aside>

4. ### Retrieve user profile

    After the user authenticates with their IdP, Scalekit redirects them to your `redirect_uri` with a temporary authorization code. Exchange this code for the user's profile information on your server.

    <Tabs syncKey="tech-stack">
        <TabItem value="node" label="Node.js">
        ```javascript
        import scalekit from '@/utils/auth.js'
        const redirectUri = 'http://localhost:3000/api/callback';

        app.get('/api/callback', async (req, res) => {
          const { code, error, error_description } = req.query;

          if (error) {
            return res.status(401).json({ error, error_description });
          }

          try {
            // Exchange the authorization code for a user profile
            const authResult = await scalekit.authenticateWithCode(
              code, redirectUri
            );

            const { user } = authResult;
            // Next step: Create a session and log in the user
            res.redirect('/dashboard');
          } catch (err) {
            console.error('Error exchanging code:', err);
            res.status(500).json({ error: 'Failed to authenticate user' });
          }
        });
        ```
        </TabItem>
        <TabItem value="py" label="Python">
        ```python
        from scalekit import CodeAuthenticationOptions

        # Handle oauth redirect_url
        code = request.args.get('code')
        error = request.args.get('error')
        error_description = request.args.get('error_description')

        if error:
            raise Exception(error_description)

        redirect_uri = 'http://localhost:3000/api/callback'
        options = CodeAuthenticationOptions()
        result = scalekit_client.authenticate_with_code(
          code,
          redirect_uri,
          options
        )

        # result.user has the authenticated user's details
        user_email = result.user.email

        # Next step: create a session for this user and allow access
        ```
        </TabItem>
        <TabItem value="go" label="Go">
        ```go
        import "github.com/scalekit/scalekit-sdk-go"

        // Handle oauth redirect_url
        code := r.URL.Query().Get("code")
        error := r.URL.Query().Get("error")
        errorDescription := r.URL.Query().Get("error_description")

        if error != "" {
          // Handle errors and exit
        }

        redirectUrl := "http://localhost:3000/api/callback"
        options := scalekit.AuthenticationOptions{}
        result, err := ScalekitClient.AuthenticateWithCode(code, redirectUrl, options)
        if err != nil {
          // Handle errors and exit
        }

        // result.User has the authenticated user's details
        userEmail := result.User.Email

        // Next step: create a session for this user and allow access
        ```
        </TabItem>
        <TabItem value="java" label="Java">
        ```java
        import com.scalekit.internal.http.AuthenticationOptions;
        import com.scalekit.models.AuthenticationResponse;

        // Handle oauth redirect_url
        String code = request.getParameter("code");
        String error = request.getParameter("error");
        String errorDescription = request.getParameter("error_description");

        if (error != null && !error.isEmpty()) {
            // Handle errors
            return;
        }

        try {
            String redirectUrl = "http://localhost:3000/api/callback";
            AuthenticationOptions options = new AuthenticationOptions();
            AuthenticationResponse result = Auth.scalekit.authentication()
                .authenticateWithCode(code, redirectUrl, options);

            // result.getIdTokenClaims() has the authenticated user's details
            String userEmail = result.getIdTokenClaims().getEmail();

            // Next step: create a session for this user and allow access
        } catch (Exception e) {
            // Handle errors
        }
        ```
        </TabItem>
    </Tabs>

    The `user` object in the `authResult` contains the authenticated user's details.

</Steps>

## Onboard your enterprise customer

To enable SSO for a customer, you first need to create an Organization for them in Scalekit. Once the organization is created, you can provide them access to the Admin Portal where they can configure their own IdP settings.

Scalekit provides two flexible ways to give your customers access to the Admin Portal:

**Option 1: Shareable Link (No-Code)**
1. Log in to your [Scalekit Dashboard](https://app.scalekit.com).
2. Navigate to the "Organizations" tab and create a new organization for your customer.
3. Select the organization and click "Generate Link" to create a shareable Admin Portal link.
4. Share this link with your customer's IT admin through email, Slack, or other communication channels.

**Option 2: Embedded Portal**
You can also embed the Admin Portal directly within your application using an iframe, allowing customers to configure their SSO settings without leaving your app.

Your customer can then use either approach to access a self-service portal and set up their SSO connection.

![Admin Portal Link Generation](@/assets/docs/home/admin-portal/1-admin-portal-v2.png)

Once they have configured their IdP, the connection will be active for their organization and will appear in your list of enterprise connections.

![Enterprise Connections UI](@/assets/docs/fsa/auth-methods/enterpise-sso-1.png)

<Aside type="note" title="Testing SSO Integration">
  During development, you don't need to manually configure each identity provider your customers might use. Scalekit provides an IdP simulator that helps you test the SSO flow easily. Learn more about [testing your SSO integration](/guides/sso/test-sso/).
</Aside>


## What's next?

- Learn more about the [Admin Portal](/guides/sso/admin-portal/) and its customization options.
- [Customize the login page](/fsa/guides/login-page-branding/) to match your brand's design and style.
- Explore our [SSO integration guides](/guides/integrations/sso-integrations/) for specific identity provider configurations.