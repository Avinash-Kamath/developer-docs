---
title: "Work with user profiles"
description: How to retrieve, update, and work with normalized user profile data in Scalekit
sidebar:
  label: "Work with user profiles"
head:
  - tag: style
    content: |
      .sl-markdown-content h2 {
        font-size: var(--sl-text-xl);
      }
      .sl-markdown-content h3 {
        font-size: var(--sl-text-lg);
      }
      table td:not(:last-child), table th:not(:last-child) {
        white-space: nowrap;
      }
prev: false
next: false
---
import { Tabs, TabItem, Aside, Badge, Steps } from '@astrojs/starlight/components';
import InstallSDK from '@components/templates/_installsdk.mdx';
import CheckItem from '@/components/ui/CheckItem.astro';

When users authenticate through any method—enterprise SSO, social login, or passwordless—Scalekit normalizes their profile information into a consistent, standardized format. This unified approach eliminates the complexity of handling different data formats from various identity providers.

This guide shows you how to work with user profiles, retrieve profile information, and keep user data current across your application.

## Understanding normalized profiles

Different identity providers return user information in varying formats and structures. For example:
- Google OAuth might return `given_name` and `family_name`
- Active Directory could provide `givenName` and `surname`
- A SAML provider might use `firstName` and `lastName`

Scalekit automatically converts all these variations into a standard format, so your application logic remains consistent regardless of how users authenticate.

**Scenario**: Your application needs to display user names consistently, whether they signed in via Google, Okta SAML, or passwordless email. With Scalekit's normalization, you always access this data the same way.

## Prerequisites

<Steps>
1. ### Set up your environment

    <CheckItem iconName="forward-slash">
     [Create a Scalekit account](https://app.scalekit.com/ws/signup) and complete the quickstart
    </CheckItem>
    <CheckItem iconName="forward-slash">
     Have users authenticating through your application
    </CheckItem>

2. ### Install the Scalekit SDK

    <InstallSDK />

    Configure your API credentials:
    ```bash
    SCALEKIT_ENVIRONMENT_URL='<YOUR_ENVIRONMENT_URL>'
    SCALEKIT_CLIENT_ID='<ENVIRONMENT_CLIENT_ID>'
    SCALEKIT_CLIENT_SECRET='<ENVIRONMENT_CLIENT_SECRET>'
    ```

    Initialize the Scalekit client:
    ```javascript
    import { Scalekit } from '@scalekit-sdk/node';

    const scalekit = new Scalekit(
      process.env.SCALEKIT_ENVIRONMENT_URL,
      process.env.SCALEKIT_CLIENT_ID,
      process.env.SCALEKIT_CLIENT_SECRET
    );
    ```
</Steps>

## Access user profile data

User profiles contain both standardized attributes and the original data from identity providers, giving you flexibility in how you use the information.

### Get user profile information

**Scenario**: Display a user's profile information in your application's settings page or admin dashboard.

```javascript title="Retrieve user profile"
const user = await scalekit.user.getUser("org_123", "user_456");

// Access normalized profile data
console.log('User email:', user.email);
console.log('Full name:', user.name);
console.log('First name:', user.userProfile.firstName);
console.log('Last name:', user.userProfile.lastName);
console.log('Profile picture:', user.picture);
console.log('Email verified:', user.emailVerified);

// Access custom metadata
console.log('Department:', user.metadata?.department);
console.log('Role:', user.metadata?.role);
```

### Access original provider data

**Scenario**: You need specific attributes that your identity provider sends but aren't part of the standard profile, such as employee ID from Active Directory or custom claims.

```javascript title="Access provider-specific data"
const user = await scalekit.user.getUser("org_123", "user_456");

// Access raw attributes from the identity provider
if (user.identities && user.identities.length > 0) {
  const identity = user.identities[0];
  const rawAttributes = identity.providerRawAttributes;

  console.log('Provider name:', identity.providerName);
  console.log('Connection type:', identity.connectionType);
  console.log('Employee ID:', rawAttributes.employeeId);
  console.log('Department from IdP:', rawAttributes.department);
  console.log('All raw attributes:', rawAttributes);
}
```

## Update user profiles

Users need to keep their profile information current, and administrators may need to update user details for compliance or organizational changes.

### Update user information

**Scenario**: A user's name changes due to marriage, or an administrator needs to update a user's department after an internal transfer.

```javascript title="Update user profile"
const updatedUser = await scalekit.user.updateUser("org_123", "user_456", {
  userProfile: {
    firstName: "Jane",
    lastName: "Smith" // Updated after marriage
  },
  metadata: {
    department: "Product", // Transferred departments
    role: "Senior Developer",
    lastUpdated: new Date().toISOString(),
    manager: "john.doe@example.com"
  }
});

console.log('User profile updated:', updatedUser.id);
```

### Update user metadata

**Scenario**: Store application-specific information like user preferences, billing details, or custom attributes that enhance your user experience.

```javascript title="Update user metadata"
const updatedUser = await scalekit.user.updateUser("org_123", "user_456", {
  metadata: {
    theme: "dark",
    timezone: "America/New_York",
    notificationPreferences: {
      email: true,
      slack: false,
      mobile: true
    },
    lastLoginAt: new Date().toISOString()
  }
});

console.log('User metadata updated');
```

## User profile structure

Understanding the normalized profile structure helps you work with user data effectively across different authentication methods.

```json title="Sample normalized user profile"
{
  "id": "user_456",
  "email": "john.doe@acmecorp.com",
  "emailVerified": true,
  "userProfile": {
    "firstName": "John",
    "lastName": "Doe"
  },
  "name": "John Doe",
  "picture": "https://lh3.googleusercontent.com/a/ACg8ocKNE4TZ...iEma17URCEf=s96-c",
  "locale": "en",
  "metadata": {
    "department": "Engineering",
    "role": "Developer",
    "employeeId": "EMP-001"
  },
  "identities": [
    {
      "connectionId": "conn_17576372041941092",
      "organizationId": "org_17002852291444836",
      "connectionType": "OIDC",
      "providerName": "Google",
      "social": true,
      "providerRawAttributes": {
        "sub": "google-oauth2|104630259163176101050",
        "email": "john.doe@acmecorp.com",
        "email_verified": true,
        "given_name": "John",
        "family_name": "Doe",
        "name": "John Doe",
        "picture": "https://lh3.googleusercontent.com/a/ACg8ocKNE4T...17URCEf=s96-c",
        "locale": "en"
      }
    }
  ]
}
```

### Standard profile attributes

| Attribute | Data type | Description |
|-----------|-----------|-------------|
| `id` | string | Unique identifier for the user within the organization |
| `email` | string | The user's email address |
| `emailVerified` | boolean | Whether the email address has been verified by the identity provider |
| `userProfile.firstName` | string | The user's first name or given name |
| `userProfile.lastName` | string | The user's last name or surname |
| `name` | string | Full formatted name combining first and last name |
| `picture` | string | URL to the user's profile picture |
| `locale` | string | User's locale as a BCP 47 language tag (e.g., 'en', 'fr') |
| `metadata` | object | Custom key-value data specific to your application |

### Identity information

The `identities` array contains detailed information about how the user authenticated, including the original data from their identity provider.

| Identity attribute | Data type | Description |
|-------------------|-----------|-------------|
| `connectionId` | string | Unique identifier for the authentication connection |
| `organizationId` | string | The organization this identity belongs to |
| `connectionType` | string | Type of connection: SAML, OIDC, or others |
| `providerName` | string | Name of the identity provider (e.g., Google, Okta, Auth0) |
| `social` | boolean | Whether this is a social login (Google, GitHub) or enterprise connection |
| `providerRawAttributes` | object | All original attributes from the identity provider |

Now that you understand user profiles, explore related topics:

- [Manage users](/fsa/guides/manage-users/) to learn about creating and managing user accounts
- [Configure user roles](/fsa/guides/user-roles/) to define permissions and access control
- [Implement sign-up](/fsa/guides/implement-signup/) to understand how profiles are created during registration