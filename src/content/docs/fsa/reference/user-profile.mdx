---
title: "Work with user profiles"
description: How to retrieve, update, and work with normalized user profile data in Scalekit
sidebar:
  label: "Work with user profiles"
head:
  - tag: style
    content: |
      .sl-markdown-content h2 {
        font-size: var(--sl-text-xl);
      }
      .sl-markdown-content h3 {
        font-size: var(--sl-text-lg);
      }
      table td:not(:last-child), table th:not(:last-child) {
        white-space: nowrap;
      }
prev: false
next: false
---
import { Tabs, TabItem, Aside, Badge, Steps } from '@astrojs/starlight/components';
import InstallSDK from '@components/templates/_installsdk.mdx';
import CheckItem from '@/components/ui/CheckItem.astro';

When users authenticate through any method—enterprise SSO, social login, or passwordless—Scalekit normalizes their profile information into a consistent, standardized format. This unified approach eliminates the complexity of handling different data formats from various identity providers.

This guide shows you how to work with user profiles, retrieve profile information, and keep user data current across your application.

## Understanding normalized profiles

Different identity providers return user information in varying formats and structures. For example:
- Google OAuth might return `given_name` and `family_name`
- Active Directory could provide `givenName` and `surname`
- A SAML provider might use `firstName` and `lastName`

Scalekit automatically converts all these variations into a standard format, so your application logic remains consistent regardless of how users authenticate.

**Scenario**: Your application needs to display user names consistently, whether they signed in via Google, Okta SAML, or passwordless email. With Scalekit's normalization, you always access this data the same way.

## Prerequisites

<Steps>
1. ### Set up your environment

    <CheckItem iconName="forward-slash">
     [Create a Scalekit account](https://app.scalekit.com/ws/signup) and complete the quickstart
    </CheckItem>
    <CheckItem iconName="forward-slash">
     Have users authenticating through your application
    </CheckItem>

2. ### Install the Scalekit SDK

    <InstallSDK />

    Configure your API credentials:
    ```bash
    SCALEKIT_ENVIRONMENT_URL='<YOUR_ENVIRONMENT_URL>'
    SCALEKIT_CLIENT_ID='<ENVIRONMENT_CLIENT_ID>'
    SCALEKIT_CLIENT_SECRET='<ENVIRONMENT_CLIENT_SECRET>'
    ```

    Initialize the Scalekit client:
    ```javascript
    import { Scalekit } from '@scalekit-sdk/node';

    const scalekit = new Scalekit(
      process.env.SCALEKIT_ENVIRONMENT_URL,
      process.env.SCALEKIT_CLIENT_ID,
      process.env.SCALEKIT_CLIENT_SECRET
    );
    ```
</Steps>

{ /**
 TODO: Definitely needs the getUser API endpoint sorted to document it
 */}

{ /*

## Access user profile data

User profiles contain both standardized attributes and the original data from identity providers, giving you flexibility in how you use the information.

### Get user profile information

**Scenario**: Display a user's profile information in your application's settings page or admin dashboard.

<Tabs syncKey="tech-stack">
  <TabItem value="node" label="Node.js">
    ```javascript
    const user = await scalekit.user.getUser("org_123", "usr_456");

    // Access normalized profile data
    console.log("User email:", user.email);
    console.log("Full name:", user.name);
    console.log("First name:", user.userProfile.firstName);
    console.log("Last name:", user.userProfile.lastName);
    console.log("Profile picture:", user.picture);
    console.log("Email verified:", user.emailVerified);

    // Access custom metadata
    console.log("Department:", user.metadata?.department);
    console.log("Role:", user.metadata?.role);
    ```
  </TabItem>
  <TabItem value="python" label="Python">
    ```python
    user, _ = sc.users.get_user("org_123", "usr_456")

    print("User email:", user.email)
    print("Full name:", user.name)
    print("First name:", user.user_profile.first_name)
    print("Last name:", user.user_profile.last_name)
    print("Profile picture:", user.picture)
    print("Email verified:", user.email_verified)

    # Custom metadata
    print("Department:", user.metadata.get("department"))
    print("Role:", user.metadata.get("role"))
    ```
  </TabItem>
  <TabItem value="go" label="Go">
    ```go
    user, err := sc.User().GetUser(ctx, "org_123", "usr_456")
    if err != nil { log.Fatal(err) }

    fmt.Println("User email:", user.Email)
    fmt.Println("Full name:", user.Name)
    fmt.Println("First name:", user.UserProfile.FirstName)
    fmt.Println("Last name:", user.UserProfile.LastName)
    fmt.Println("Profile picture:", user.Picture)
    fmt.Println("Email verified:", user.EmailVerified)

    fmt.Println("Department:", user.Metadata["department"])
    fmt.Println("Role:", user.Metadata["role"])
    ```
  </TabItem>
  <TabItem value="java" label="Java">
    ```java
    GetUserResponse res = users.getUser("org_123", "usr_456");
    var user = res.getUser();

    System.out.println("User email: " + user.getEmail());
    System.out.println("Full name: " + user.getName());
    System.out.println("First name: " + user.getUserProfile().getFirstName());
    System.out.println("Last name: " + user.getUserProfile().getLastName());
    System.out.println("Profile picture: " + user.getPicture());
    System.out.println("Email verified: " + user.getEmailVerified());

    System.out.println("Department: " + user.getMetadataMap().get("department"));
    System.out.println("Role: " + user.getMetadataMap().get("role"));
    ```
  </TabItem>
</Tabs>

### Access original provider data

**Scenario**: You need specific attributes that your identity provider sends but aren't part of the standard profile, such as employee ID from Active Directory or custom claims.

<Tabs syncKey="tech-stack">
  <TabItem value="node" label="Node.js">
    ```javascript
    const user = await scalekit.user.getUser("org_123", "usr_456");

    if (user.identities?.length) {
      const identity = user.identities[0];
      const raw = identity.providerRawAttributes;

      console.log("Provider name:", identity.providerName);
      console.log("Connection type:", identity.connectionType);
      console.log("Employee ID:", raw.employeeId);
      console.log("Department from IdP:", raw.department);
      console.log("All raw attributes:", raw);
    }
    ```
  </TabItem>
  <TabItem value="python" label="Python">
    ```python
    user, _ = sc.users.get_user("org_123", "usr_456")

    if user.identities:
        identity = user.identities[0]
        raw = identity.provider_raw_attributes

        print("Provider name:", identity.provider_name)
        print("Connection type:", identity.connection_type)
        print("Employee ID:", raw.get("employeeId"))
        print("Department from IdP:", raw.get("department"))
        print("All raw attributes:", raw)
    ```
  </TabItem>
  <TabItem value="go" label="Go">
    ```go
    user, err := sc.User().GetUser(ctx, "org_123", "usr_456")
    if err != nil { log.Fatal(err) }

    if len(user.Identities) > 0 {
        id := user.Identities[0]
        raw := id.ProviderRawAttributes.AsMap()

        fmt.Println("Provider name:", id.ProviderName)
        fmt.Println("Connection type:", id.ConnectionType)
        fmt.Println("Employee ID:", raw["employeeId"])
        fmt.Println("Department from IdP:", raw["department"])
        fmt.Println("All raw attributes:", raw)
    }
    ```
  </TabItem>
  <TabItem value="java" label="Java">
    ```java
    GetUserResponse res = users.getUser("org_123", "usr_456");
    var user = res.getUser();

    if (!user.getIdentitiesList().isEmpty()) {
        var id = user.getIdentities(0);
        var raw = id.getProviderRawAttributesMap();

        System.out.println("Provider name: " + id.getProviderName());
        System.out.println("Connection type: " + id.getConnectionType());
        System.out.println("Employee ID: " + raw.get("employeeId"));
        System.out.println("Department from IdP: " + raw.get("department"));
        System.out.println("All raw attributes: " + raw);
    }
    ```
  </TabItem>
</Tabs>

*/}

## Update user profiles

Users need to keep their profile information current, and administrators may need to update user details for compliance or organizational changes.

### Update user information

**Scenario**: An organization administrator needs to update a user's department after an internal transfer.

<Tabs syncKey="tech-stack">
  <TabItem value="node" label="Node.js">
    ```javascript
    const updatedUser = await scalekit.user.updateUser("usr_456", {
      userProfile: {
        firstName: "Jane",
        lastName: "Smith", // Updated after marriage
      },
      metadata: {
        department: "Product",            // Transferred departments
        role: "Senior Developer",
        lastUpdated: new Date().toISOString(),
        manager: "john.doe@example.com",
      },
    });

    console.log("User profile updated:", updatedUser.id);
    ```
  </TabItem>
  <TabItem value="python" label="Python">
    ```python
    from datetime import datetime
    from scalekit.v1.users.users_pb2 import UpdateUser
    from scalekit.v1.commons.commons_pb2 import UserProfile

    update_user = UpdateUser(
        user_profile=UserProfile(
            first_name="Jane",
            last_name="Smith",
        ),
        metadata={
            "department": "Product",
            "role": "Senior Developer",
            "manager": "john.doe@example.com",
            "lastUpdated": datetime.utcnow().isoformat(),
        },
    )

    sc.users.update_user(user_id="usr_456", user=update_user)
    print("User profile updated!")
    ```
  </TabItem>
  <TabItem value="go" label="Go">
    ```go
    upd := &usersv1.UpdateUser{
        UserProfile: &usersv1.UpdateUserProfile{
            FirstName: "Jane",
            LastName:  "Smith",
        },
        Metadata: map[string]string{
            "department": "Product",
            "role":       "Senior Developer",
            "manager":    "john.doe@example.com",
        },
    }

    resp, err := sc.User().UpdateUser(ctx, "usr_456", upd)
    if err != nil {
        log.Fatalf("update user: %v", err)
    }
    fmt.Println("User profile updated:", resp.User.Id)
    ```
  </TabItem>
  <TabItem value="java" label="Java">
    ```java
    UpdateUser upd = UpdateUser.newBuilder()
        .setUserProfile(UpdateUserProfile.newBuilder()
            .setFirstName("Jane")
            .setLastName("Smith")
            .build())
        .putMetadata("department", "Product")
        .putMetadata("role", "Senior Developer")
        .putMetadata("manager", "john.doe@example.com")
        .build();

    UpdateUserResponse res = users.updateUser(
        "usr_456",
        UpdateUserRequest.newBuilder().setUser(upd).build()
    );
    System.out.println("User profile updated: " + res.getUser().getId());
    ```
  </TabItem>
</Tabs>

### Update user metadata

**Scenario**: Store application-specific information like user preferences, billing details, or custom attributes that enhance your user experience.

<Tabs syncKey="tech-stack">
  <TabItem value="node" label="Node.js">
    ```javascript
    const updatedUser = await scalekit.user.updateUser("usr_456", {
      metadata: {
        theme: "dark",
        timezone: "America/New_York",
        notificationPreferences: {
          email: true,
          slack: false,
          mobile: true,
        },
        lastLoginAt: new Date().toISOString(),
      },
    });

    console.log("User metadata updated");
    ```
  </TabItem>
  <TabItem value="python" label="Python">
    ```python
    from datetime import datetime
    from scalekit.v1.users.users_pb2 import UpdateUser

    update_user = UpdateUser(
        metadata={
            "theme": "dark",
            "timezone": "America/New_York",
            "notificationPreferences": {
                "email": True,
                "slack": False,
                "mobile": True,
            },
            "lastLoginAt": datetime.utcnow().isoformat(),
        },
    )

    sc.users.update_user(user_id="usr_456", user=update_user)
    print("User metadata updated")
    ```
  </TabItem>
  <TabItem value="go" label="Go">
    ```go
    upd := &usersv1.UpdateUser{
        Metadata: map[string]string{
            "theme":      "dark",
            "timezone":   "America/New_York",
            "lastLoginAt": time.Now().Format(time.RFC3339),
        },
    }

    if _, err := sc.User().UpdateUser(ctx, "usr_456", upd); err != nil {
        log.Fatalf("update metadata: %v", err)
    }
    fmt.Println("User metadata updated")
    ```
  </TabItem>
  <TabItem value="java" label="Java">
    ```java
    UpdateUser upd = UpdateUser.newBuilder()
        .putMetadata("theme", "dark")
        .putMetadata("timezone", "America/New_York")
        .putMetadata("lastLoginAt", Instant.now().toString())
        .build();

    users.updateUser(
        "usr_456",
        UpdateUserRequest.newBuilder().setUser(upd).build()
    );
    System.out.println("User metadata updated");
    ```
  </TabItem>
</Tabs>



## User profile structure

Understanding the normalized profile structure helps you work with user data effectively across different authentication methods.

```json title="Sample normalized user profile"
{
  "id": "user_456",
  "email": "john.doe@acmecorp.com",
  "emailVerified": true,
  "name": "John Doe",
  "givenName": "John",
  "familyName": "Doe",
  "picture": "https://lh3.googleusercontent.com/a/ACg8ocKNE4TZ...iEma17URCEf=s96-c",
  "locale": "en",
  "metadata": "{\"department\":\"Engineering\",\"role\":\"Developer\",\"employeeId\":\"EMP-001\"}", // optional
  "identities": [
    {
      "connectionId": "conn_17576372041941092",
      "organizationId": "org_17002852291444836",
      "connectionType": "OIDC",
      "providerName": "Google",
      "social": true,
      "providerRawAttributes": "{\"sub\":\"google-oauth2|104630259163176101050\",\"email\":\"john.doe@acmecorp.com\",...}"
    }
  ]
}
```

### Standard profile attributes

| Attribute | Data type | Description |
|-----------|-----------|-------------|
| `id` | string | Unique identifier for the user within the organization |
| `email` | string | The user's email address |
| `emailVerified` | boolean | Whether the email address has been verified by the identity provider |
| `userProfile.firstName` | string | The user's first name or given name |
| `userProfile.lastName` | string | The user's last name or surname |
| `name` | string | Full formatted name combining first and last name |
| `picture` | string | URL to the user's profile picture |
| `locale` | string | User's locale as a BCP 47 language tag (e.g., 'en', 'fr') |
| `metadata` | object | Custom key-value data specific to your application |

### Identity information

The `identities` array contains detailed information about how the user authenticated, including the original data from their identity provider.

| Identity attribute | Data type | Description |
|-------------------|-----------|-------------|
| `connectionId` | string | Unique identifier for the authentication connection |
| `organizationId` | string | The organization this identity belongs to |
| `connectionType` | string | Type of connection: SAML, OIDC, or others |
| `providerName` | string | Name of the identity provider (e.g., Google, Okta, Auth0) |
| `social` | boolean | Whether this is a social login (Google, GitHub) or enterprise connection |
| `providerRawAttributes` | object | All original attributes from the identity provider |

Now that you understand user profiles, explore related topics:

- [Manage users](/fsa/reference/user-profile/) to learn about creating and managing user accounts
- [Configure user roles](/fsa/guides/user-roles/) to define permissions and access control
- [Implement sign-up](/fsa/guides/implement-signup/) to understand how profiles are created during registration