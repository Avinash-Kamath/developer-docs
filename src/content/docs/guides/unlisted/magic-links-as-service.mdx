---
title: Implement Passwordless Authentication APIs
description: Learn how to integrate passwordless authentication into your applications using our headless API solutions.
---

import { Aside, Steps } from '@astrojs/starlight/components';

This guide shows you how to implement three authentication methods:

1. **OTP (One-Time Password)** - Send temporary codes via email
2. **Magic Link** - Send secure login links via email
3. **Magic Link + OTP** - Combine both methods for enhanced security

<Aside type="note">
  For Magic Link or Magic Link + OTP implementations, you must configure either a redirect URL in your API request or a default `headless_redirect_uri` in your passwordless configuration.
</Aside>

## OTP (One-Time Password) Authentication Flow

<Steps>

1.  **Initiate the Passwordless Request**

    Make a `POST` request to the `/api/v1/auth/passwordless` endpoint with the user's email.
    ```go
    POST /api/v1/auth/passwordless - CLIENT_CREDENTIALS

    Request:
    {
    "email": "dev@example.com"
    // "redirect_uri" is optional here for OTP-only flows.
    }

    Response: 200
    {
        "auth_request_id": "req_xxxx"
    }

    // Error cases (4xx):
    // - Headless mode not enabled
    // - Passwordless authentication not enabled
    ```

2.  **Receive Authentication Request ID**

    Your application receives and should store the `auth_request_id` from the response. This ID is crucial for the verification step.

3.  **Verify the OTP**

    When the user inputs the OTP (received via email) into your application, your backend makes a `POST` request to `/api/v1/auth/passwordless:verify` with the `auth_request_id` and the user-provided `code`.
    ```go
    POST /api/v1/auth/passwordless:verify - CLIENT_CREDENTIALS

    Request:
    {
        "code": "USER_ENTERED_OTP",
        "auth_request_id": "req_xxxx"
    }

    Response:
    200 - Authentication successful
    400 - {"code": "CODE_MISMATCH"} // Invalid or expired code
    ```

</Steps>

## Magic Link Authentication Flow

<Aside type="note">
  A `redirect_uri` is mandatory for Magic Link authentication. It can be provided in the initial `/api/v1/auth/passwordless` request or pre-configured as `headless_redirect_uri`.
</Aside>

<Steps>

1.  **Initiate the Passwordless Request (for Magic Link)**

    Make a `POST` request to the `/api/v1/auth/passwordless` endpoint with the user's email and a `redirect_uri`.
    ```go
    POST /api/v1/auth/passwordless - CLIENT_CREDENTIALS

    Request:
    {
    "email": "dev@example.com",
    "redirect_uri": "https://b2bapp.com/passwordless/callback" // Mandatory for Magic Link
    }

    Response: 200
    {
        "auth_request_id": "req_xxxx"
    }
    // Error cases (4xx) include:
    // - Headless mode not enabled
    // - Missing redirect URI configuration
    // - Passwordless authentication not enabled
    ```
    The user then receives an email containing a unique magic link, for example:
    `https://b2bappauth.scalekit.com/link/linkid_l`

2.  **User Clicks the Magic Link**

    Upon clicking the magic link, the user is redirected to your specified `redirect_uri` with a `linkid` appended as a query parameter:
    `https://b2bapp.com/passwordless/callback?linkid=xxxxxxxxxx`

3.  **Verify the Magic Link**

    Your application's backend extracts the `linkid` from the callback URL. Then, it makes a `POST` request to `/api/v1/auth/passwordless:verify` using this `linkid` and the original `auth_request_id` (which your application should have retained from step 1).
    ```go
    POST /api/v1/auth/passwordless:verify - CLIENT_CREDENTIALS

    Request:
    {
        "linkid": "xxxxxxxxxx", // Extracted from callback URL
        "auth_request_id": "req_xxxx" // From the initial phase
    }

    Response:
    200 - Authentication successful
    400 - {"code": "CODE_MISMATCH"} // Invalid or expired link
    ```
    <Aside type="tip">
      Magic links offer a seamless experience, working across different browsers and devices. Users can start the process on one device and complete it on another.
    </Aside>

</Steps>

## How to Resend Authentication Codes or Links

If a user doesn't receive the OTP or magic link, or if it expires, your application can trigger a resend operation. This requires the `auth_request_id` from the initial passwordless request.

Make a `POST` request to `/api/v1/auth/passwordless:resend`:
```go
POST /api/v1/auth/passwordless:resend
{
"auth_request_id": "req_123" // The original auth_request_id
}

Response:
200 - New code/link sent successfully
```