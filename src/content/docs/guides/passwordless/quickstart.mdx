---
title: Quickstart (Headless API)
description: A comprehensive guide to implementing secure, passwordless authentication using Scalekit's Headless API
slug: "guides/passwordless/quickstart"
sidebar:
 label: 'Quickstart'
 badge:
   text: 'Headless'
   variant: 'default'
head:
  - tag: style
    content: |
      table td:first-child, table th:first-child {
        white-space: nowrap;
      }
next: false
---

import { Aside, Steps, Badge, Tabs, TabItem, LinkCard } from '@astrojs/starlight/components';

This guide will walk you through implementing passwordless authentication by sending one time passcodes to your user's email address via Scalekit's APIs.

### Prerequisites

Before you begin, ensure you have:

1. Access to your Scalekit Account and the API credentials. If you don't have a Scalekit account yet, you can [signup here](https://app.scalekit.com/ws/signup).
2. Installed Scalekit SDK into your project

    ```sh showLineNumbers=false
    npm install @scalekit/sdk
    ```

    ```js showLineNumbers=false
    import { Scalekit } from '@scalekit-sdk/node';

    const scalekit = new Scalekit(
      '<SCALEKIT_ENVIRONMENT_URL>',
      '<SCALEKIT_CLIENT_ID>',
      '<SCALEKIT_CLIENT_SECRET>',
    );
    ```

## Implementation guide

<Steps>

1. ### Configure settings

    Before implementing the code, ensure passwordless authentication is properly configured in your Scalekit dashboard:

    1. Navigate to _Authentication > Auth Methods_
    2. Locate the _Passwordless_ section
    3. Ensure _Verification Code_ is enabled
    4. Save your changes

    ![](@/assets/docs/unlisted/passwordless/1.png)

    <Aside type="tip" title="Pro Tip">
    You can customize the verification email templates under _Branding > Email Templates_ to match your application's branding.
    </Aside>

2. ### Send verification code

   The first step in the passwordless flow is to send a verification code to the user's email. This code will be used to verify their identity.

   **Implementation steps**

   Follow these steps to implement the verification code flow:

   1. Create a form to collect the user's email address
   2. Call the verification code API when the form is submitted
   3. Handle the response to provide feedback to the user

   **API endpoint**

   ```http showLineNumbers=false
   POST /api/v1/passwordless/email/send
   ```

   **Request parameters**

   | Parameters | Type | Required | Description |
   |-----------|------|----------|-------------|
   | `email` | string | Yes | Recipient's email address |
   | `expires_in` | number | No | Code expiration time in seconds (default: 300) |
   | `state` | string | No | OIDC state parameter for request validation |
   | `template` | string | No | Email template to use (`SIGNIN` or `SIGNUP`) |

   **Example implementation**

   <Tabs syncKey='tech-stack'>
    <TabItem label="Curl">
    ```sh ins={5-8} "/api/v1/passwordless/email/send" title="Request" wrap
    curl -L '<SCALEKIT_ENVIRONMENT_URL>/api/v1/passwordless/email/send' \
    -H 'Content-Type: application/json' \
    -H 'Authorization: Bearer eyJh..' \
    --data-raw '{
        "email": "john.doe@example.com",
        "expires_in": 300,
        "state": "jAy-state1-gM4fdZ...2nqm6Q",
        "template": "SIGNIN",
    }'
    ```

    </TabItem>
    <TabItem label="Node.js">
    ```js wrap
    const options = {
      template: "SIGNIN", // or "SIGNUP"
      state: "jAy-state1-...2nqm6Q", // optional, defaults to a random string
      expiresIn: 3600 // optional, defaults to 3600 seconds
    };

    const sendResponse = await scalekit.passwordless
      .sendPasswordlessEmail(
        "<john.doe@example.com>",
        options
    );

    // sendResponse = {
    //   authRequestId: string,
    //   expiresAt: number,    // seconds since epoch
    //   expiresIn: number,    // seconds
    //   passwordlessType: string  // "OTP" | "LINK" | "LINK_OTP"
    // }

    ```
    </TabItem>
   </Tabs>


    ```json showLineNumbers=false title="Response"
    {
        "auth_request_id": "jAy-state1-gM4fdZ...2nqm6Q",
        "expires_at": "1748696575",
        "expires_in": 100,
        "passwordless_type": "OTP"
        }
        ```
        | Parameters | Description |
        |-----------|-------------|
        | `auth_request_id` | A unique identifier for the authentication request that can be used to verify the code <Badge variant="note" text="string" /> |
        | `expires_at` | Unix timestamp indicating when the verification code will expire <Badge variant="note" text="string" /> |
        | `expires_in` | The time in seconds after which the verification code will expire. Default is 100 seconds <Badge variant="note" text="number" /> |
        | `passwordless_type` | The type of passwordless authentication to use. Currently supports `OTP`, `LINK`, `LINK_OTP` <Badge variant="note" text="string" /> |

        <Aside type="caution" title="Rate limits">
        You can send a maximum of 2 passwordless emails per minute per email address, including emails resent.
        </Aside>

3. ### Resend a verification code

   Users can request a new verification code if they need one. Use the following endpoint to send a fresh code.

   <Tabs syncKey='tech-stack'>
    <TabItem label="Curl">
    ```sh ins={5} "/api/v1/passwordless/email/resend" title="Request" wrap
    curl -L '<SCALEKIT_ENVIRONMENT_URL>/api/v1/passwordless/email/resend' \
    -H 'Content-Type: application/json' \
    -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsIm..' \
    -d '{
        "auth_request_id": "jAy-state1-gM4fdZ...2nqm6Q"
    }'
    ```

    </TabItem>
    <TabItem label="Node.js">
    ```js
    const resendResponse = await scalekit.passwordless
    .resendPasswordlessEmail(
        sendResponse.authRequestId
    );

    // resendResponse = {
    //   authRequestId: string,
    //   expiresAt: number,    // seconds since epoch
    //   expiresIn: number,    // seconds
    //   passwordlessType: string  // "OTP" | "LINK" | "LINK_OTP"
    // }

    ```
    </TabItem>
   </Tabs>

   | Parameters | Description |
   |-----------|-------------|
   | `auth_request_id` | The unique identifier for the authentication request that was sent earlier <Badge variant="note" text="string" /> |

    ```json showLineNumbers=false title="Response"
    {
        "auth_request_id": "MMXw81GFTH8p0cz..z1POS8C46fUVQ",
        "expires_at": "1748700599",
        "expires_in": 100,
        "passwordless_type": "OTP"
    }
    ```

    | Parameters | Description |
    |-----------|-------------|
    | `email` | The email address of the user to send the verification code to <Badge variant="note" text="string" /> |
    | `expires_in` | The time in seconds after which the verification code will expire. Default is 100 seconds (5 minutes) <Badge variant="note" text="number" /> |
    | `state` | A unique state parameter that validates the authentication response matches the original request, crucial for passwordless flows with delayed verification. Based on OIDC spec <Badge variant="note" text="string" /> |
    | `template` | The email template to use. Currently supports `SIGNIN` and `SIGNUP` <Badge variant="note" text="string" /> |

4. ### Verify the code

   Once the user receives the verification code, they'll enter it in your application. Use the following endpoint to validate the code and complete the authentication process.

   **Implementation steps**

   Follow these steps to verify the user's code:

   1. Create a form to collect the verification code
   2. Call the verification API when the form is submitted
   3. Handle the response to either grant access or show an error

   **API endpoint**

   ```http showLineNumbers=false
   POST /api/v1/passwordless/email/verify
   ```

   **Request parameters**

   | Parameter | Type | Required | Description |
   |-----------|------|----------|-------------|
   | `code` | string | Yes | The verification code entered by the user |
   | `auth_request_id` | string | Yes | The request ID from the send code response |

    **Example implementation**

   <Tabs syncKey='tech-stack'>
    <TabItem label="Curl">
    ```sh ins={5,6} "/api/v1/passwordless/email/verify" title="Request" showLineNumbers=false
    curl -L '<SCALEKIT_ENVIRONMENT_URL>/api/v1/passwordless/email/verify' \
    -H 'Content-Type: application/json' \
    -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsIm..' \
    -d '{
        "code": "123456",
        "auth_request_id": "YC4QR-dVZVtNNVHcHwrnHNDV..."
    }'
    ```

    </TabItem>
    <TabItem label="Node.js">
    ```js
    const verifyResponse = await scalekit.passwordless
    .verifyPasswordlessEmail(
        "123456", // code received via email
        sendResponse.authRequestId
    );

    // verifyResponse = {
    //   email: string,
    //   state: string,        // optional
    //   template: string,     // "SIGNIN" | "SIGNUP"
    //   passwordlessType: string // "OTP" | "LINK" | "LINK_OTP"
    // }

    ```
    </TabItem>
   </Tabs>

   | Parameters | Description |
   |-----------|-------------|
   | `code` | The verification code received by the user <Badge variant="note" text="string" /> |
   | `auth_request_id` | The unique identifier for the authentication request that was sent earlier <Badge variant="note" text="string" /> |

    ```json showLineNumbers=false title="Response"
    {
       "email": "saifshine7@gmail.com",
       "state": "jAy-state1-gM4fdZdV22nqm6Q_j..",
       "template": "SIGNIN",
       "passwordless_type": "OTP"
   }
    ```

   | Parameters | Description |
   |-----------|-------------|
   | `email` | The email address of the user <Badge variant="note" text="string" /> |
   | `state` | The state parameter that was passed in the original request <Badge variant="note" text="string" /> |
   | `template` | The template that was used for the verification code <Badge variant="note" text="string" /> |
   | `passwordless_type` | The type of passwordless authentication to use. Currently supports `OTP`, `LINK`, `LINK_OTP` <Badge variant="note" text="string" /> |

</Steps>

Congratulations! You've successfully implemented passwordless authentication in your application. Users can now sign in securely without passwords by entering a verification code sent to their email.

## Next steps

- **Test your implementation**: Try the complete authentication flow to ensure everything works as expected
- **Enhance security**: Consider implementing rate limiting and suspicious activity monitoring
- **Customize emails**: Update the email templates to match your brand

<Aside type="tip" title="Best Practices">

- Always implement rate limiting on the client side to prevent abuse
- Provide clear error messages for invalid or expired codes
- Monitor failed authentication attempts for security purposes

</Aside>

<LinkCard
  title="Need more help?"
  href="/support/contact-us"
  description="Reach out to us for any questions or support"
/>
